{"ast":null,"code":"import{dec2bin}from'./utils.js';import*as THREE from\"three\";import{Point}from\"./Point\";export var NEUTRAL_COLOR=\"hsl(255, 0%, 46%)\";export function resetOpacity(cylinders){cylinders.forEach(function(cylinder){var newMaterial=cylinder.material.clone();newMaterial.transparent=false;newMaterial.opacity=1;cylinder.material=newMaterial;});}export function resetText(texts,scene){texts.forEach(function(text){var selectedObject=scene.getObjectByName(text.name);scene.remove(selectedObject);});}export function getChildsChilds(data,cluster){var childsChildCount=0;for(var i=0;i<cluster[\"Desc\"].length;++i){childsChildCount+=data[cluster[\"Desc\"][i]].NodeCount;}if(cluster[\"Separate\"]!==undefined){childsChildCount=data[cluster[\"Separate\"]].NodeCount;}return childsChildCount;}export function createCoordinatesForSingleSon(point,prevPoint,id){var dirVector=new THREE.Vector3(point.x-prevPoint.x,point.y-prevPoint.y,point.z-prevPoint.z);var newStartPoint=new Point(point.x,point.y,point.z);// to make copy\nvar newPoint=new Point(dirVector.x+point.x,dirVector.y+point.y,dirVector.z+point.z);return Object.freeze({id:id,//cluster[\"Desc\"][0],\nprevPoint:newStartPoint,point:newPoint});}export function createDescriptionForCluster(cluster,cylinder,nodes_ids,number_of_nodes){var text=\"\";cluster[\"Nodes\"].forEach(function(elem){if(text!==\"\"){text+=\",\";}text+=\" (\";var bin=dec2bin(elem,number_of_nodes);for(var i=0;i<bin.length;i++){if(bin[i]===\"1\"){text+=\" \"+nodes_ids[i];}}text+=\" )\";});var atraktor=cylinder.userData.isAtractor?\"<br><b>Atraktor</b>\":\"\";return\"<b>Rank</b>: \"+cluster[\"Rank\"]+\"<br><b>Nodes</b>: \"+text+atraktor;}export function calcColorBacks(cluster){if(cluster[\"Backs\"].length>0){return\"hsl(259, 20%, 30%)\";}return NEUTRAL_COLOR;}export function calcColorRank(max,val){var min=0;var minHue=240,maxHue=0;var curPercent=(val-min)/(max-min);var colString=\"hsl(\"+(curPercent*(maxHue-minHue)+minHue)+\",25%,40%)\";return colString;}export function crossProduct(a,b){return new THREE.Vector3(a.y*b.z-a.z*b.y,a.z*b.x-a.x*b.z,a.x*b.y-a.y*b.x);}","map":{"version":3,"names":["dec2bin","THREE","Point","NEUTRAL_COLOR","resetOpacity","cylinders","forEach","cylinder","newMaterial","material","clone","transparent","opacity","resetText","texts","scene","text","selectedObject","getObjectByName","name","remove","getChildsChilds","data","cluster","childsChildCount","i","length","NodeCount","undefined","createCoordinatesForSingleSon","point","prevPoint","id","dirVector","Vector3","x","y","z","newStartPoint","newPoint","Object","freeze","createDescriptionForCluster","nodes_ids","number_of_nodes","elem","bin","atraktor","userData","isAtractor","calcColorBacks","calcColorRank","max","val","min","minHue","maxHue","curPercent","colString","crossProduct","a","b"],"sources":["/home/xkruzel/Desktop/todo/reactapp/src/rendering_utils.js"],"sourcesContent":["import { dec2bin } from './utils.js';\nimport * as THREE from \"three\";\nimport { Point } from \"./Point\";\n\n\nexport const NEUTRAL_COLOR = \"hsl(255, 0%, 46%)\";\n\nexport function resetOpacity(cylinders) {\n    cylinders.forEach(function (cylinder) {\n        const newMaterial = cylinder.material.clone();\n        newMaterial.transparent = false;\n        newMaterial.opacity = 1;\n        cylinder.material = newMaterial;\n    });\n}\n  \nexport function resetText(texts, scene) {\n    texts.forEach(function (text) {\n      var selectedObject = scene.getObjectByName(text.name);\n      scene.remove(selectedObject);\n    });\n}\n  \nexport function getChildsChilds(data, cluster) {\n    var childsChildCount = 0;\n    for (var i = 0; i < cluster[\"Desc\"].length; ++i) {\n      childsChildCount += data[cluster[\"Desc\"][i]].NodeCount;\n    }\n  \n    if (cluster[\"Separate\"] !== undefined) {\n      childsChildCount = data[cluster[\"Separate\"]].NodeCount;\n    }\n  \n    return childsChildCount;\n}\n\nexport function createCoordinatesForSingleSon(point, prevPoint, id) {\n    const dirVector = new THREE.Vector3(\n      point.x - prevPoint.x,\n      point.y - prevPoint.y,\n      point.z - prevPoint.z\n    );\n  \n    var newStartPoint = new Point(point.x, point.y, point.z); // to make copy\n    const newPoint = new Point(\n      dirVector.x + point.x,\n      dirVector.y + point.y,\n      dirVector.z + point.z\n    );\n  \n    return Object.freeze({\n      id: id, //cluster[\"Desc\"][0],\n      prevPoint: newStartPoint,\n      point: newPoint,\n    });\n}\n\nexport function createDescriptionForCluster(cluster, cylinder, nodes_ids, number_of_nodes) {\n    var text = \"\";\n    cluster[\"Nodes\"].forEach(function (elem) {\n      if (text !== \"\") {\n        text += \",\";\n      }\n      text += \" (\";\n      const bin = dec2bin(elem, number_of_nodes);\n  \n      for (let i = 0; i < bin.length; i++) {\n        if (bin[i] === \"1\") {\n          text += \" \" + nodes_ids[i];\n        }\n      }\n      text += \" )\";\n    });\n  \n    const atraktor = cylinder.userData.isAtractor ? \"<br><b>Atraktor</b>\" : \"\";\n    return \"<b>Rank</b>: \" + cluster[\"Rank\"] + \"<br><b>Nodes</b>: \" + text + atraktor;\n  }\n  \n  export function calcColorBacks(cluster) {\n    if (cluster[\"Backs\"].length > 0) {\n      return \"hsl(259, 20%, 30%)\";\n    }\n  \n    return NEUTRAL_COLOR;\n  }\n  \n  export function calcColorRank(max, val) {\n    const min = 0\n    var minHue = 240, maxHue=0;\n    var curPercent = (val - min) / (max-min);\n    var colString = \"hsl(\" + ((curPercent * (maxHue-minHue) ) + minHue) + \",25%,40%)\";\n    return colString;\n  }\n\n  export function crossProduct(a, b) {\n    return new THREE.Vector3(\n      a.y * b.z - a.z * b.y,\n      a.z * b.x - a.x * b.z,\n      a.x * b.y - a.y * b.x\n    );\n  }"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}